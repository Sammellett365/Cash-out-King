import streamlit as st
from PIL import Image
import pytesseract

st.title("ğŸ“¸ OCR Betslip Reader")

st.markdown("Upload a screenshot of your betslip and we'll extract the text using OCR.")

# Upload image
uploaded_file = st.file_uploader("Upload Image", type=["png", "jpg", "jpeg"])

if uploaded_file:
    # Display image
    image = Image.open(uploaded_file)
    st.image(image, caption="Uploaded Betslip", use_column_width=True)

    # OCR processing
    with st.spinner("Extracting text..."):
        text = pytesseract.image_to_string(image)

    # Show raw OCR output
    st.subheader("ğŸ“ Extracted Text")
    st.text_area("Raw OCR Output", text, height=200)

    # Basic parsing (e.g., lines with numbers or odds)
    st.subheader("ğŸ” Parsed Lines (Selections or Odds)")
    lines = text.splitlines()
    parsed = [line for line in lines if any(char.isdigit() for char in line)]
    for line in parsed:
        st.markdown(f"- {line}")
else:
    st.info("Please upload a betslip image to begin.")
